<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobShield AI - Recruitment Scam Detection</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-dark sticky-top">
        <div class="container">
            <a class="navbar-brand neon-text" href="#">
                <i class="fas fa-shield-alt me-2"></i>
                JobShield AI
            </a>
            <div class="d-flex align-items-center">
                <span class="badge me-3">
                    <i class="fas fa-circle-notch fa-spin" style="display:none;" id="navStatusSpinner"></i>
                    <span id="navStatusText">READY</span>
                </span>
                <a href="https://github.com/HEMANTH2208/Hackrush" target="_blank" class="btn btn-sm btn-outline-primary">
                    <i class="fab fa-github me-1"></i> GITHUB
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 mb-3">
                <i class="fas fa-shield-alt"></i> Detect Recruitment Scams Instantly
            </h1>
            <p class="lead">AI-Powered Fraud Detection | 85-95% Accuracy | Analysis in Seconds</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- Setup Alert -->
        <div class="row justify-content-center mb-4" id="setupAlert">
            <div class="col-lg-10">
                <div class="alert alert-primary alert-dismissible fade show" role="alert">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-info-circle fa-2x me-3"></i>
                        <div class="flex-grow-1">
                            <strong>FIRST TIME SETUP:</strong> Train the ML models to enable fraud detection.
                            <button class="btn btn-sm btn-dark ms-3" onclick="trainModels(event)">
                                <i class="fas fa-brain me-1"></i> TRAIN MODELS
                            </button>
                        </div>
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row justify-content-center">
            <!-- Main Analysis Card -->
            <div class="col-lg-10">
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-file-alt me-2"></i>
                        ANALYZE JOB POSTING
                    </div>
                    <div class="card-body p-4">
                        <!-- Input Type Tabs -->
                        <ul class="nav nav-tabs mb-4" id="inputTypeTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="email-tab" data-bs-toggle="tab" data-bs-target="#email-input" type="button">
                                    <i class="fas fa-envelope me-2"></i>Email
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="text-tab" data-bs-toggle="tab" data-bs-target="#text-input" type="button">
                                    <i class="fas fa-align-left me-2"></i>Text
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="link-tab" data-bs-toggle="tab" data-bs-target="#link-input" type="button">
                                    <i class="fas fa-link me-2"></i>Link
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="whatsapp-tab" data-bs-toggle="tab" data-bs-target="#whatsapp-input" type="button">
                                    <i class="fab fa-whatsapp me-2"></i>WhatsApp
                                </button>
                            </li>
                        </ul>

                        <!-- Tab Content -->
                        <div class="tab-content" id="inputTypeContent">
                            <!-- Email Input (First/Preferred) -->
                            <div class="tab-pane fade show active" id="email-input" role="tabpanel">
                                <form id="emailAnalysisForm">
                                    <div class="mb-4">
                                        <label class="form-label">
                                            <i class="fas fa-envelope me-2"></i>
                                            Email Content *
                                        </label>
                                        <textarea 
                                            class="form-control form-control-lg" 
                                            id="emailText" 
                                            rows="10" 
                                            placeholder="Paste the entire email content here (including subject, body, and sender details)..."
                                            required></textarea>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Copy and paste the complete email including subject line and sender information
                                        </div>
                                    </div>

                                    <div class="row g-3 mb-4">
                                        <div class="col-md-6">
                                            <label class="form-label">Sender Email Address (Optional)</label>
                                            <input type="email" class="form-control" id="emailSender" placeholder="sender@example.com">
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label">Email Subject (Optional)</label>
                                            <input type="text" class="form-control" id="emailSubject" placeholder="Job Offer - Software Engineer">
                                        </div>
                                    </div>

                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fas fa-search me-2"></i>
                                            Analyze Email for Fraud
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- Text Input -->
                            <div class="tab-pane fade" id="text-input" role="tabpanel">
                                <form id="textAnalysisForm">
                                    <div class="mb-4">
                                        <label class="form-label">
                                            <i class="fas fa-file-alt me-2"></i>
                                            Job Description or Message *
                                        </label>
                                        <textarea 
                                            class="form-control form-control-lg" 
                                            id="jobText" 
                                            rows="8" 
                                            placeholder="Paste job offer, WhatsApp message, email, or job posting here..."
                                            required></textarea>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Supports text from email, WhatsApp, Telegram, LinkedIn, and job portals
                                        </div>
                                    </div>

                                    <!-- Advanced Options Toggle -->
                                    <div class="mb-4">
                                        <button 
                                            class="btn btn-link p-0" 
                                            type="button" 
                                            data-bs-toggle="collapse" 
                                            data-bs-target="#advancedOptions">
                                            <i class="fas fa-cog me-2"></i>
                                            <span id="advancedToggleText">Show Advanced Options</span>
                                            <i class="fas fa-chevron-down ms-2" id="advancedChevron"></i>
                                        </button>
                                    </div>

                                    <!-- Advanced Options -->
                                    <div class="collapse" id="advancedOptions">
                                        <div class="card bg-light border-0 mb-4">
                                            <div class="card-body">
                                                <h6 class="text-muted mb-3">Optional: Provide additional details for deeper analysis</h6>
                                                
                                                <div class="row g-3">
                                                    <div class="col-md-6">
                                                        <label class="form-label">Company Name</label>
                                                        <input type="text" class="form-control" id="companyName" placeholder="e.g., Google, Infosys">
                                                    </div>
                                                    
                                                    <div class="col-md-6">
                                                        <label class="form-label">Recruiter Email</label>
                                                        <input type="email" class="form-control" id="recruiterEmail" placeholder="recruiter@company.com">
                                                    </div>
                                                    
                                                    <div class="col-md-6">
                                                        <label class="form-label">Contact Method</label>
                                                        <select class="form-select" id="contactMethod">
                                                            <option value="">Select...</option>
                                                            <option value="email">Email</option>
                                                            <option value="whatsapp">WhatsApp</option>
                                                            <option value="telegram">Telegram</option>
                                                            <option value="phone">Phone</option>
                                                            <option value="linkedin">LinkedIn</option>
                                                        </select>
                                                    </div>
                                                    
                                                    <div class="col-md-6">
                                                        <label class="form-label">Offered Salary (₹ thousands/year)</label>
                                                        <input type="number" class="form-control" id="offeredSalary" placeholder="e.g., 1200 for 12 LPA">
                                                    </div>
                                                    
                                                    <div class="col-12">
                                                        <label class="form-label">LinkedIn Profile URL</label>
                                                        <input type="url" class="form-control" id="linkedinUrl" placeholder="https://linkedin.com/in/recruiter-name">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Action Buttons -->
                                    <div class="d-grid gap-2 mb-3">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fas fa-search me-2"></i>
                                            Analyze for Fraud
                                        </button>
                                    </div>

                                    <!-- Quick Test Samples -->
                                    <div class="row g-2">
                                        <div class="col-6">
                                            <button type="button" class="btn btn-outline-danger w-100" onclick="loadScamSample()">
                                                <i class="fas fa-exclamation-triangle me-1"></i>
                                                Try Scam Example
                                            </button>
                                        </div>
                                        <div class="col-6">
                                            <button type="button" class="btn btn-outline-success w-100" onclick="loadLegitSample()">
                                                <i class="fas fa-check-circle me-1"></i>
                                                Try Legitimate Example
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <!-- Link Input -->
                            <div class="tab-pane fade" id="link-input" role="tabpanel">
                                <form id="linkAnalysisForm">
                                    <div class="mb-4">
                                        <label class="form-label">
                                            <i class="fas fa-link me-2"></i>
                                            Job Posting URL *
                                        </label>
                                        <input 
                                            type="url" 
                                            class="form-control form-control-lg" 
                                            id="jobLink" 
                                            placeholder="https://example.com/job-posting"
                                            required>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Paste link from Naukri, LinkedIn, Indeed, or any job portal
                                        </div>
                                    </div>

                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fas fa-search me-2"></i>
                                            Analyze Link
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <!-- WhatsApp Input -->
                            <div class="tab-pane fade" id="whatsapp-input" role="tabpanel">
                                <form id="whatsappAnalysisForm">
                                    <div class="mb-4">
                                        <label class="form-label">
                                            <i class="fab fa-whatsapp me-2"></i>
                                            WhatsApp Message *
                                        </label>
                                        <textarea 
                                            class="form-control form-control-lg" 
                                            id="whatsappText" 
                                            rows="8" 
                                            placeholder="Paste WhatsApp message here..."
                                            required></textarea>
                                        <div class="form-text">
                                            <i class="fas fa-info-circle me-1"></i>
                                            Copy and paste the entire WhatsApp conversation or message
                                        </div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label">WhatsApp Number (Optional)</label>
                                        <input type="tel" class="form-control" id="whatsappNumber" placeholder="+91-XXXXXXXXXX">
                                    </div>

                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-primary btn-lg">
                                            <i class="fas fa-search me-2"></i>
                                            Analyze WhatsApp Message
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Loading Card -->
                <div class="card mb-4" id="loadingCard" style="display: none;">
                    <div class="card-body text-center py-5">
                        <div class="spinner-border mb-3" style="width: 3rem; height: 3rem;">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <h5 class="mb-2">ANALYZING...</h5>
                        <p class="text-muted">RUNNING AI DETECTION ALGORITHMS</p>
                    </div>
                </div>

                <!-- Results Card -->
                <div class="card" id="resultsCard" style="display: none;">
                    <div class="card-header" id="resultsHeader">
                        <i class="fas fa-chart-bar me-2"></i>
                        ANALYSIS RESULTS
                    </div>
                    <div class="card-body p-4" id="resultsBody">
                        <!-- Results will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="row mt-5 pt-5">
            <div class="col-12 text-center mb-4">
                <h2 class="fw-bold text-primary">HOW IT WORKS</h2>
                <p class="text-muted">AI-POWERED MULTI-FACTOR FRAUD DETECTION</p>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-robot fa-2x"></i>
                    </div>
                    <h6 class="fw-semibold text-primary">AI DETECTION</h6>
                    <p class="small text-muted">5 ML MODELS ANALYZE PATTERNS</p>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-building fa-2x"></i>
                    </div>
                    <h6 class="fw-semibold text-primary">COMPANY CHECK</h6>
                    <p class="small text-muted">MCA REGISTRY VERIFICATION</p>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-chart-line fa-2x"></i>
                    </div>
                    <h6 class="fw-semibold text-primary">SALARY ANALYSIS</h6>
                    <p class="small text-muted">MARKET COMPARISON</p>
                </div>
            </div>
            <div class="col-md-3 col-6 mb-4">
                <div class="text-center">
                    <div class="feature-icon mb-3">
                        <i class="fas fa-file-pdf fa-2x"></i>
                    </div>
                    <h6 class="fw-semibold text-primary">PDF REPORTS</h6>
                    <p class="small text-muted">DETAILED EVIDENCE</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                    <p class="mb-0">
                        © 2024 JOBSHIELD AI. MIT LICENSE. BUILT FOR SAFER JOB HUNTING.
                    </p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <a href="https://github.com/HEMANTH2208/Hackrush" class="me-3">
                        <i class="fab fa-github me-1"></i> GITHUB
                    </a>
                    <span class="text-muted">85-95% ACCURACY • <5S ANALYSIS</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Notifications -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
        <div id="successToast" class="toast align-items-center bg-success border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body">
                    <i class="fas fa-check-circle me-2"></i>
                    <span id="successMessage"></span>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
        <div id="errorToast" class="toast align-items-center bg-danger border-0" role="alert">
            <div class="d-flex">
                <div class="toast-body">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <span id="errorMessage"></span>
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script>
        // Toggle advanced options text
        document.getElementById('advancedOptions').addEventListener('show.bs.collapse', function () {
            document.getElementById('advancedToggleText').textContent = 'Hide Advanced Options';
            document.getElementById('advancedChevron').classList.remove('fa-chevron-down');
            document.getElementById('advancedChevron').classList.add('fa-chevron-up');
        });
        document.getElementById('advancedOptions').addEventListener('hide.bs.collapse', function () {
            document.getElementById('advancedToggleText').textContent = 'Show Advanced Options';
            document.getElementById('advancedChevron').classList.remove('fa-chevron-up');
            document.getElementById('advancedChevron').classList.add('fa-chevron-down');
        });
    </script>
</body>
</html>
